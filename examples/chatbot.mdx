---
title: 'Chatbot Example'
description: 'Building a chatbot using Agentic Templates'
---

# Chatbot Example

This example demonstrates how to build a chatbot using Agentic Templates.

## Implementation

1. **Agent Definition**:
```typescript
// packages/core/src/agents/chatbot.ts
import { Agent } from './types';

export const chatbot: Agent = {
  id: 'chatbot',
  name: 'Customer Support Bot',
  description: 'Handles customer inquiries and support requests',
  
  config: {
    model: 'gpt-4-turbo',
    temperature: 0.7,
    maxTokens: 2048,
    systemPrompt: `You are a helpful customer support agent.
    Be friendly and professional in your responses.`
  },
  
  async process(input, context) {
    const { message, history } = input;
    
    // Process message with context
    const response = await processMessage(message, {
      history,
      config: this.config
    });
    
    return {
      message: response,
      metadata: {
        timestamp: new Date().toISOString(),
        messageId: generateId()
      }
    };
  }
};
```

2. **API Integration**:
```typescript
// packages/functions/src/chat/handler.ts
import { APIGatewayProxyHandler } from 'aws-lambda';
import { chatbot } from '@my-app/core/agents';

export const handler: APIGatewayProxyHandler = async (event) => {
  const { message, sessionId } = JSON.parse(event.body || '{}');
  
  // Get chat history
  const history = await getSessionHistory(sessionId);
  
  // Process message
  const response = await chatbot.process({ message, history });
  
  // Save to history
  await saveToHistory(sessionId, message, response);
  
  return {
    statusCode: 200,
    body: JSON.stringify(response)
  };
};
```

3. **Frontend Integration**:
```typescript
// src/components/features/chat/ChatWindow.tsx
'use client';

import { useState } from 'react';
import { useChat } from '@/hooks/useChat';

export function ChatWindow() {
  const [input, setInput] = useState('');
  const { messages, sendMessage } = useChat();
  
  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!input.trim()) return;
    
    await sendMessage(input);
    setInput('');
  };
  
  return (
    <div className="flex flex-col h-full">
      <div className="flex-1 overflow-y-auto p-4">
        {messages.map((msg) => (
          <ChatMessage key={msg.id} message={msg} />
        ))}
      </div>
      
      <form onSubmit={handleSubmit} className="p-4 border-t">
        <input
          value={input}
          onChange={(e) => setInput(e.target.value)}
          placeholder="Type your message..."
          className="w-full p-2 rounded border"
        />
      </form>
    </div>
  );
}
```

## Features

- Real-time chat interface
- Message history persistence
- Contextual responses
- Typing indicators
- Error handling
- Message delivery status

## Configuration

1. **Environment Variables**:
```bash
# .env
OPENAI_API_KEY=sk-...
CHATBOT_SYSTEM_PROMPT="Custom system prompt..."
CHAT_HISTORY_TTL=86400  # 24 hours in seconds
```

2. **Infrastructure**:
```typescript
// sst.config.ts
import { StackContext, Table, Api } from 'sst/constructs';

export function ChatStack({ stack }: StackContext) {
  // Chat history table
  const table = new Table(stack, 'ChatHistory', {
    fields: {
      sessionId: 'string',
      timestamp: 'number',
      message: 'string'
    },
    primaryIndex: { partitionKey: 'sessionId', sortKey: 'timestamp' }
  });
  
  // Chat API
  const api = new Api(stack, 'ChatApi', {
    defaults: {
      function: {
        bind: [table]
      }
    },
    routes: {
      'POST /chat': 'packages/functions/src/chat/handler.handler'
    }
  });
}
```

## Testing

```typescript
// packages/core/test/agents/chatbot.test.ts
import { chatbot } from '../../src/agents/chatbot';

describe('Chatbot', () => {
  it('processes messages with context', async () => {
    const result = await chatbot.process({
      message: 'Hello',
      history: []
    });
    
    expect(result.message).toBeDefined();
    expect(result.metadata.messageId).toBeDefined();
  });
});
```

## Next Steps

- [View Code Assistant Example](/examples/code-assistant)
- [Add Custom Agents](/guides/adding-agents)
- [Return to Templates](/templates/api-template) 