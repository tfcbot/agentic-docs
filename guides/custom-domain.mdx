---
title: 'Custom Domains'
description: 'Configure custom domains for your Agentic Team OS deployment'
---

# Custom Domain Setup

This guide explains how to set up custom domains for your Agentic Team OS deployment. We recommend purchasing and managing your domains through Cloudflare for optimal integration with the platform.

## Prerequisites

1. Purchase a domain through Cloudflare
2. Set up a Cloudflare account
3. Configure your domain's DNS settings in Cloudflare

## Domain Configuration

Each template (API, Dashboard, Landing) can be configured with its own subdomain:

```bash
# Common domain structure
api.yourdomain.com    # API Template
app.yourdomain.com    # Dashboard Template
www.yourdomain.com    # Landing Page Template
```

## Environment Variables

Add the following environment variables to each template's `.env` file:

```bash
# API Template (.env)
DOMAIN=api.yourdomain.com
HOSTED_ZONE=yourdomain.com

# Dashboard Template (.env)
DOMAIN=app.yourdomain.com
HOSTED_ZONE=yourdomain.com

# Landing Page Template (.env)
DOMAIN=www.yourdomain.com
HOSTED_ZONE=yourdomain.com
```

## SST Configuration

### API Template

The API template uses SST's Api construct to configure the custom domain:

```typescript
// sst.config.ts
export default {
  config(_input) {
    return {
      name: "api",
      region: "us-east-1",
    };
  },
  stacks(app) {
    app.stack(function Site({ stack }) {
      const api = new Api(stack, "api", {
        customDomain: {
          domainName: process.env.DOMAIN,
          hostedZone: process.env.HOSTED_ZONE,
        },
        // ... other configuration
      });
    });
  }
};
```

### Dashboard Template

The Dashboard template uses SST's NextjsSite construct:

```typescript
// sst.config.ts
export default {
  config(_input) {
    return {
      name: "dashboard",
      region: "us-east-1",
    };
  },
  stacks(app) {
    app.stack(function Site({ stack }) {
      const site = new NextjsSite(stack, "site", {
        customDomain: {
          domainName: process.env.DOMAIN,
          hostedZone: process.env.HOSTED_ZONE,
        },
        // ... other configuration
      });
    });
  }
};
```

### Landing Page Template

Similar to the Dashboard, the Landing Page template uses NextjsSite:

```typescript
// sst.config.ts
export default {
  config(_input) {
    return {
      name: "landing",
      region: "us-east-1",
    };
  },
  stacks(app) {
    app.stack(function Site({ stack }) {
      const site = new NextjsSite(stack, "site", {
        customDomain: {
          domainName: process.env.DOMAIN,
          hostedZone: process.env.HOSTED_ZONE,
        },
        // ... other configuration
      });
    });
  }
};
```

## DNS Configuration

1. **Certificate Generation**
   - SST automatically generates SSL certificates through AWS Certificate Manager
   - Certificates are provisioned for your custom domains
   - Validation is handled through DNS records

2. **DNS Records**
   - SST creates the necessary DNS records in your hosted zone
   - Records include A records and CNAME records
   - CloudFront distributions are automatically configured

3. **Cloudflare Settings**
   - Set SSL/TLS encryption mode to "Full"
   - Enable "Always Use HTTPS"
   - Configure Page Rules if needed

## Verification

After deployment, verify your custom domains:

1. Check DNS propagation:
```bash
dig api.yourdomain.com
dig app.yourdomain.com
dig www.yourdomain.com
```

2. Verify SSL certificates:
```bash
curl -I https://api.yourdomain.com
curl -I https://app.yourdomain.com
curl -I https://www.yourdomain.com
```

## Troubleshooting

Common issues and solutions:

1. **DNS Propagation**
   - DNS changes can take up to 48 hours to propagate
   - Use `dig` or online DNS tools to check status

2. **Certificate Validation**
   - Ensure DNS records for certificate validation are correct
   - Check AWS Certificate Manager for validation status

3. **Cloudflare Proxy**
   - If using Cloudflare proxy, ensure SSL/TLS settings are correct
   - Check Cloudflare's SSL/TLS encryption mode

4. **SST Deployment**
   - Run `sst deploy --stage prod` to deploy with custom domain
   - Check CloudFormation stack events for any errors

## Next Steps

- [Configure AWS](/essentials/configuration/aws)
- [Configure Cloudflare](/essentials/configuration/cloudflare)
- [Deployment Guide](/guides/deployment) 