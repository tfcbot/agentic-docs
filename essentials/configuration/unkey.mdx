---
title: 'Unkey'
description: 'Set up Unkey for API key management and rate limiting'
---

# Unkey Configuration

[Unkey](https://unkey.dev) provides API key management, rate limiting, and analytics for your Agentic Templates application.

## Setup Steps

1. Create a Unkey Account:
   - Go to [unkey.dev](https://unkey.dev)
   - Sign up for a new account
   - Create a new project

2. Create Root API Key:
   - Navigate to your project settings
   - Create a new root API key
   - This will be used as your `UNKEY_API_KEY` in the API service

3. Create API Key Configuration:
   - Go to the API Keys section
   - Create a new API key configuration for your application
   - Configure rate limits and permissions
   - This will generate your `NEXT_PUBLIC_UNKEY_API_KEY` for the dashboard

## Environment Variables

### API Service (.env)
```bash
UNKEY_API_KEY=key_...  # Your root API key for managing other keys
```

### Dashboard (.env)
```bash
NEXT_PUBLIC_UNKEY_API_KEY=key_...  # Public API key for frontend operations
```

## Key Management Setup

1. Create Key Prefix:
   ```bash
   # Example format for your API keys
   agn_<environment>_<user_id>_<key_number>
   ```

2. Configure Rate Limits:
   - Set appropriate rate limits for your API endpoints
   - Example configuration:
   ```json
   {
     "ratelimit": {
       "type": "fast",
       "limit": 100,
       "refillRate": 10,
       "refillInterval": 60
     }
   }
   ```

## Integration Features

Unkey provides several features that are used in the Agentic Templates:

1. **API Key Management**:
   - Create and revoke API keys
   - Set expiration dates
   - Add metadata to keys

2. **Rate Limiting**:
   - Per-key rate limiting
   - Global rate limiting
   - Custom rate limit rules

3. **Analytics**:
   - Track API usage
   - Monitor rate limit hits
   - Analyze key usage patterns

## Usage Examples

### Creating API Keys
```typescript
// In your API service
import { Unkey } from "@unkey/api";

const unkey = new Unkey({ token: process.env.UNKEY_API_KEY });

const newKey = await unkey.keys.create({
  prefix: "agn",
  apiId: "your_api_id",
  ownerId: userId,
  meta: {
    environment: "production",
    tier: "pro"
  },
  ratelimit: {
    type: "fast",
    limit: 100,
    refillRate: 10,
    refillInterval: 60
  }
});
```

### Verifying Keys
```typescript
const { result, error } = await unkey.keys.verify({
  key: apiKey,
});

if (error || !result.valid) {
  throw new Error("Invalid API key");
}
```

## Best Practices

1. **Key Management**:
   - Use descriptive prefixes for different environments
   - Include metadata for tracking and filtering
   - Set appropriate expiration dates

2. **Rate Limiting**:
   - Start with conservative limits
   - Monitor usage patterns
   - Adjust based on actual usage

3. **Security**:
   - Never expose your root API key
   - Use environment-specific keys
   - Regularly rotate keys

## Common Issues

### Rate Limit Exceeded
If users are hitting rate limits:
1. Check current limits in Unkey dashboard
2. Analyze usage patterns
3. Adjust limits if needed

### Key Verification Failed
If key verification is failing:
1. Verify the key format
2. Check key status in dashboard
3. Ensure proper environment variables

## Next Steps

- [Configure Cloudflare](/essentials/configuration/cloudflare)
- [Set up Stripe](/essentials/configuration/stripe)
- [Return to Quickstart](/quickstart) 